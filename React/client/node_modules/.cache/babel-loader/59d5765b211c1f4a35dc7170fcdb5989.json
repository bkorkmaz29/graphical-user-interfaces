{"ast":null,"code":"var _jsxFileName = \"/home/bk/Code/graphical-user-interfaces/React/client/src/components/Home/Home.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, createContext, useContext } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport UpdateEntry from './UpdateEntry';\nimport Entries from './Entries';\nimport AddEntry from './AddEntry';\nimport AddProject from './AddProject';\nimport Control from './Control';\nimport Navbar from './Navbar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const [user, setUser] = useState('');\n  const [showAddEntry, setShowAddEntry] = useState(false);\n  const [showAddProject, setShowAddProject] = useState(false);\n  const [showUpdateEntry, setShowUpdateEntry] = useState(false); //const [projects, setProjects] = useState([])\n  //const [entries, setEntries] = useState([])\n\n  const [entry, setEntry] = useState();\n  const [projectCodes, setProjectCodes] = useState([]);\n  const [dailyEntries, setDailyEntries] = useState([]);\n  const [timeSpent, setTimeSpent] = useState(0);\n  let a = new Date();\n  let newDate = a.toISOString().split('T')[0];\n  const [date, setDate] = useState(newDate);\n  const [month, setMonth] = useState(newDate.slice(0, -3));\n  console.log(month);\n  const location = useLocation();\n  const {\n    from\n  } = location.state;\n  useEffect(() => {\n    setUser(from.user);\n    console.log(user);\n  }, []);\n  useEffect(() => {\n    const fetchData = async () => {\n      const resEntry = await axios(`http://localhost:5000/entries/${from.user}`);\n      const resProject = await axios(`http://localhost:5000/projects`);\n      setDailyEntries(resEntry.data.entries.filter(entry => entry.date === date));\n      setProjectCodes(resProject.data.projects.map(project => project.code));\n      let sumAll = resEntry.data.entries.filter(entry => entry.date === date).map(entry => parseInt(entry.time)).reduce((prev, curr) => prev + curr, 0);\n      setTimeSpent(sumAll); // setUser(from.user);\n    };\n\n    fetchData();\n  }, [user, date, showAddEntry, showAddProject, showUpdateEntry]);\n\n  const addProject = async project => {\n    setShowAddProject(!showAddProject); //setProjects([...projects, setProjects])\n    //setProjectCodes([ ...projectCodes, project.code])\n\n    axios.post(`http://localhost:5000/projects`, project);\n  };\n\n  const addEntry = async entry => {\n    setShowAddEntry(!showAddEntry);\n    setEntry(entry);\n    let id = uuidv4();\n    let newEntry = { ...entry,\n      date,\n      id\n    }; // setEntries([...entries, newEntry])\n    // setDailyEntries(...dailyEntries, entry);  \n\n    axios.post(`http://localhost:5000/entries`, newEntry);\n  };\n\n  const deleteEntry = async id => {\n    setDailyEntries(dailyEntries.filter(entry => entry.id !== id));\n    axios.delete(`http://localhost:5000/entries/${id}`);\n  };\n\n  const updateEntry = async newEntry => {\n    // console.log(newEntry.id)\n    //setEntries(entries.filter((e) => e.id !== entry.id))\n    //console.log(newEntry)\n    // setEntries([...entries, newEntry])\n    axios.patch(`http://localhost:5000/entries/${newEntry.id}`, {\n      code: newEntry.code,\n      time: newEntry.time,\n      description: newEntry.description\n    });\n    setShowUpdateEntry(!showUpdateEntry);\n  };\n\n  const showUpdate = entry => {\n    setEntry(entry);\n    setShowUpdateEntry(!showUpdateEntry);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col w-screen items-center justify-center\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      username: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Control, {\n      onAddEntry: () => {\n        setShowAddEntry(!showAddEntry);\n        setShowAddProject(false);\n      },\n      onAddProject: () => {\n        setShowAddProject(!showAddProject);\n        setShowAddEntry(false);\n      },\n      onUpdateEntry: () => {\n        setShowUpdateEntry(!showAddProject);\n        setShowUpdateEntry(false);\n      },\n      onChangeDate: e => setDate(e.target.value),\n      timeSpent: timeSpent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this), showAddEntry && /*#__PURE__*/_jsxDEV(AddEntry, {\n      onAddEntry: addEntry,\n      projectCodes: projectCodes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this), showAddProject && /*#__PURE__*/_jsxDEV(AddProject, {\n      onAddProject: addProject\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 28\n    }, this), showUpdateEntry && /*#__PURE__*/_jsxDEV(UpdateEntry, {\n      onUpdateEntry: updateEntry,\n      entry: entry\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Entries, {\n      entries: dailyEntries,\n      onUpdate: showUpdate,\n      onDelete: deleteEntry\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Home, \"oyy1d8iZwJXM8l4xZa08UMtat68=\", false, function () {\n  return [useLocation];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/bk/Code/graphical-user-interfaces/React/client/src/components/Home/Home.js"],"names":["useEffect","useState","createContext","useContext","v4","uuidv4","useLocation","axios","UpdateEntry","Entries","AddEntry","AddProject","Control","Navbar","Home","user","setUser","showAddEntry","setShowAddEntry","showAddProject","setShowAddProject","showUpdateEntry","setShowUpdateEntry","entry","setEntry","projectCodes","setProjectCodes","dailyEntries","setDailyEntries","timeSpent","setTimeSpent","a","Date","newDate","toISOString","split","date","setDate","month","setMonth","slice","console","log","location","from","state","fetchData","resEntry","resProject","data","entries","filter","projects","map","project","code","sumAll","parseInt","time","reduce","prev","curr","addProject","post","addEntry","id","newEntry","deleteEntry","delete","updateEntry","patch","description","showUpdate","e","target","value"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,EAA8BC,aAA9B,EAA6CC,UAA7C,QAA+D,OAA/D;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;;;AAGA,MAAMC,IAAI,GAAG,MAAM;AAAA;;AACf,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBf,QAAQ,CAAC,EAAD,CAAhC;AAGA,QAAM,CAACgB,YAAD,EAAeC,eAAf,IAAkCjB,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAACkB,cAAD,EAAiBC,iBAAjB,IAAsCnB,QAAQ,CAAC,KAAD,CAApD;AACA,QAAM,CAACoB,eAAD,EAAkBC,kBAAlB,IAAwCrB,QAAQ,CAAC,KAAD,CAAtD,CANe,CAOf;AACA;;AACA,QAAM,CAACsB,KAAD,EAAQC,QAAR,IAAoBvB,QAAQ,EAAlC;AACA,QAAM,CAACwB,YAAD,EAAeC,eAAf,IAAkCzB,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAAC0B,YAAD,EAAeC,eAAf,IAAkC3B,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAAC4B,SAAD,EAAYC,YAAZ,IAA4B7B,QAAQ,CAAC,CAAD,CAA1C;AACA,MAAI8B,CAAC,GAAG,IAAIC,IAAJ,EAAR;AACA,MAAIC,OAAO,GAAGF,CAAC,CAACG,WAAF,GAAgBC,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAd;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBpC,QAAQ,CAACgC,OAAD,CAAhC;AACA,QAAM,CAACK,KAAD,EAAQC,QAAR,IAAoBtC,QAAQ,CAACgC,OAAO,CAACO,KAAR,CAAc,CAAd,EAAiB,CAAC,CAAlB,CAAD,CAAlC;AACFC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;AACE,QAAMK,QAAQ,GAAGrC,WAAW,EAA5B;AACA,QAAM;AAAEsC,IAAAA;AAAF,MAAWD,QAAQ,CAACE,KAA1B;AAGA7C,EAAAA,SAAS,CAAC,MAAM;AAEdgB,IAAAA,OAAO,CAAC4B,IAAI,CAAC7B,IAAN,CAAP;AACA0B,IAAAA,OAAO,CAACC,GAAR,CAAY3B,IAAZ;AAGH,GANU,EAMR,EANQ,CAAT;AAUAf,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAM8C,SAAS,GAAG,YAAY;AAC5B,YAAMC,QAAQ,GAAG,MAAMxC,KAAK,CACzB,iCAAgCqC,IAAI,CAAC7B,IAAK,EADjB,CAA5B;AAGA,YAAMiC,UAAU,GAAG,MAAMzC,KAAK,CAC3B,gCAD2B,CAA9B;AAGAqB,MAAAA,eAAe,CAACmB,QAAQ,CAACE,IAAT,CAAcC,OAAd,CAAsBC,MAAtB,CAA8B5B,KAAD,IAAWA,KAAK,CAACa,IAAN,KAAeA,IAAvD,CAAD,CAAf;AACAV,MAAAA,eAAe,CAACsB,UAAU,CAACC,IAAX,CAAgBG,QAAhB,CAAyBC,GAAzB,CAA8BC,OAAD,IAAaA,OAAO,CAACC,IAAlD,CAAD,CAAf;AACA,UAAIC,MAAM,GAAGT,QAAQ,CAACE,IAAT,CAAcC,OAAd,CAAsBC,MAAtB,CAA8B5B,KAAD,IAAWA,KAAK,CAACa,IAAN,KAAeA,IAAvD,EAA6DiB,GAA7D,CAAiE9B,KAAK,IAAIkC,QAAQ,CAAClC,KAAK,CAACmC,IAAP,CAAlF,EAAgGC,MAAhG,CAAuG,CAACC,IAAD,EAAOC,IAAP,KAAgBD,IAAI,GAAGC,IAA9H,EAAoI,CAApI,CAAb;AACA/B,MAAAA,YAAY,CAAC0B,MAAD,CAAZ,CAV4B,CAW7B;AACA,KAZD;;AAcAV,IAAAA,SAAS;AACV,GAhBM,EAgBJ,CAAC/B,IAAD,EAAOqB,IAAP,EAAanB,YAAb,EAA2BE,cAA3B,EAA2CE,eAA3C,CAhBI,CAAT;;AAmBA,QAAMyC,UAAU,GAAG,MAAOR,OAAP,IAAmB;AAClClC,IAAAA,iBAAiB,CAAC,CAACD,cAAF,CAAjB,CADkC,CAElC;AACA;;AAEAZ,IAAAA,KAAK,CAACwD,IAAN,CAAY,gCAAZ,EAA6CT,OAA7C;AACD,GANH;;AAQE,QAAMU,QAAQ,GAAG,MAAOzC,KAAP,IAAiB;AAChCL,IAAAA,eAAe,CAAC,CAACD,YAAF,CAAf;AACAO,IAAAA,QAAQ,CAACD,KAAD,CAAR;AACA,QAAI0C,EAAE,GAAG5D,MAAM,EAAf;AACA,QAAI6D,QAAQ,GAAG,EAAE,GAAG3C,KAAL;AAAYa,MAAAA,IAAZ;AAAkB6B,MAAAA;AAAlB,KAAf,CAJgC,CAOhC;AACA;;AACA1D,IAAAA,KAAK,CAACwD,IAAN,CAAY,+BAAZ,EAA4CG,QAA5C;AACD,GAVD;;AAYA,QAAMC,WAAW,GAAG,MAAOF,EAAP,IAAc;AAChCrC,IAAAA,eAAe,CAACD,YAAY,CAACwB,MAAb,CAAqB5B,KAAD,IAAWA,KAAK,CAAC0C,EAAN,KAAaA,EAA5C,CAAD,CAAf;AACA1D,IAAAA,KAAK,CAAC6D,MAAN,CAAc,iCAAgCH,EAAG,EAAjD;AACD,GAHD;;AAKA,QAAMI,WAAW,GAAG,MAAOH,QAAP,IAAoB;AACtC;AACA;AAEA;AACA;AACA3D,IAAAA,KAAK,CAAC+D,KAAN,CAAa,iCAAgCJ,QAAQ,CAACD,EAAG,EAAzD,EAA4D;AAAEV,MAAAA,IAAI,EAAEW,QAAQ,CAACX,IAAjB;AAAuBG,MAAAA,IAAI,EAAEQ,QAAQ,CAACR,IAAtC;AAA4Ca,MAAAA,WAAW,EAAEL,QAAQ,CAACK;AAAlE,KAA5D;AACAjD,IAAAA,kBAAkB,CAAC,CAACD,eAAF,CAAlB;AACD,GARD;;AAUA,QAAMmD,UAAU,GAAIjD,KAAD,IAAW;AAC5BC,IAAAA,QAAQ,CAACD,KAAD,CAAR;AACAD,IAAAA,kBAAkB,CAAC,CAACD,eAAF,CAAlB;AAGD,GALD;;AAUF,sBAAO;AAAK,IAAA,SAAS,EAAC,oDAAf;AAAA,4BACH,QAAC,MAAD;AAAQ,MAAA,QAAQ,EAAEN;AAAlB;AAAA;AAAA;AAAA;AAAA,YADG,eAEH,QAAC,OAAD;AACI,MAAA,UAAU,EAAE,MAAM;AACdG,QAAAA,eAAe,CAAC,CAACD,YAAF,CAAf;AACAG,QAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACH,OAJL;AAKI,MAAA,YAAY,EAAE,MAAM;AAChBA,QAAAA,iBAAiB,CAAC,CAACD,cAAF,CAAjB;AACAD,QAAAA,eAAe,CAAC,KAAD,CAAf;AACH,OARL;AASI,MAAA,aAAa,EAAE,MAAM;AACjBI,QAAAA,kBAAkB,CAAC,CAACH,cAAF,CAAlB;AACAG,QAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACH,OAZL;AAaI,MAAA,YAAY,EAAGmD,CAAD,IAAOpC,OAAO,CAACoC,CAAC,CAACC,MAAF,CAASC,KAAV,CAbhC;AAcI,MAAA,SAAS,EAAE9C;AAdf;AAAA;AAAA;AAAA;AAAA,YAFG,EAmBAZ,YAAY,iBACX,QAAC,QAAD;AACI,MAAA,UAAU,EAAE+C,QADhB;AAEI,MAAA,YAAY,EAAEvC;AAFlB;AAAA;AAAA;AAAA;AAAA,YApBD,EAyBFN,cAAc,iBAAI,QAAC,UAAD;AAAY,MAAA,YAAY,EAAE2C;AAA1B;AAAA;AAAA;AAAA;AAAA,YAzBhB,EA0BFzC,eAAe,iBACZ,QAAC,WAAD;AAAa,MAAA,aAAa,EAAEgD,WAA5B;AAAyC,MAAA,KAAK,EAAE9C;AAAhD;AAAA;AAAA;AAAA;AAAA,YA3BD,eA6BH,QAAC,OAAD;AACI,MAAA,OAAO,EAAEI,YADb;AAEI,MAAA,QAAQ,EAAE6C,UAFd;AAGI,MAAA,QAAQ,EAAEL;AAHd;AAAA;AAAA;AAAA;AAAA,YA7BG;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAmCH,CAnID;;GAAMrD,I;UAkBeR,W;;;KAlBfQ,I;AAqIN,eAAeA,IAAf","sourcesContent":["import { useEffect, useState, createContext, useContext } from 'react'\nimport { v4 as uuidv4 } from 'uuid';\nimport { useLocation } from 'react-router-dom'\nimport axios from 'axios';\n\nimport UpdateEntry from './UpdateEntry';\nimport Entries from './Entries';\nimport AddEntry from './AddEntry';\nimport AddProject from './AddProject';\nimport Control from './Control';\nimport Navbar from './Navbar';\n\n\nconst Home = () => {\n    const [user, setUser] = useState('')\n\n\n    const [showAddEntry, setShowAddEntry] = useState(false)\n    const [showAddProject, setShowAddProject] = useState(false)\n    const [showUpdateEntry, setShowUpdateEntry] = useState(false)\n    //const [projects, setProjects] = useState([])\n    //const [entries, setEntries] = useState([])\n    const [entry, setEntry] = useState()\n    const [projectCodes, setProjectCodes] = useState([])\n    const [dailyEntries, setDailyEntries] = useState([])\n    const [timeSpent, setTimeSpent] = useState(0)\n    let a = new Date();\n    let newDate = a.toISOString().split('T')[0];\n    const [date, setDate] = useState(newDate);\n    const [month, setMonth] = useState(newDate.slice(0, -3))\n  console.log(month)\n    const location = useLocation()\n    const { from } = location.state\n  \n\n    useEffect(() => {\n      \n      setUser(from.user);\n      console.log(user);\n    \n\n  }, []);\n\n    \n    \n    useEffect(() => {\n        const fetchData = async () => {\n          const resEntry = await axios(\n            `http://localhost:5000/entries/${from.user}`\n          );\n          const resProject = await axios(\n            `http://localhost:5000/projects`\n          );\n          setDailyEntries(resEntry.data.entries.filter((entry) => entry.date === date));\n          setProjectCodes(resProject.data.projects.map((project) => project.code));\n          let sumAll = resEntry.data.entries.filter((entry) => entry.date === date).map(entry => parseInt(entry.time)).reduce((prev, curr) => prev + curr, 0);\n          setTimeSpent(sumAll);\n         // setUser(from.user);\n        };\n    \n        fetchData();\n      }, [user, date, showAddEntry, showAddProject, showUpdateEntry]);\n    \n\n    const addProject = async (project) => {\n        setShowAddProject(!showAddProject)\n        //setProjects([...projects, setProjects])\n        //setProjectCodes([ ...projectCodes, project.code])\n    \n        axios.post(`http://localhost:5000/projects`, project)\n      }\n    \n      const addEntry = async (entry) => {\n        setShowAddEntry(!showAddEntry);\n        setEntry(entry);\n        let id = uuidv4();\n        let newEntry = { ...entry, date, id }\n    \n    \n        // setEntries([...entries, newEntry])\n        // setDailyEntries(...dailyEntries, entry);  \n        axios.post(`http://localhost:5000/entries`, newEntry)\n      }\n    \n      const deleteEntry = async (id) => {\n        setDailyEntries(dailyEntries.filter((entry) => entry.id !== id))\n        axios.delete(`http://localhost:5000/entries/${id}`)\n      }\n    \n      const updateEntry = async (newEntry) => {\n        // console.log(newEntry.id)\n        //setEntries(entries.filter((e) => e.id !== entry.id))\n    \n        //console.log(newEntry)\n        // setEntries([...entries, newEntry])\n        axios.patch(`http://localhost:5000/entries/${newEntry.id}`, { code: newEntry.code, time: newEntry.time, description: newEntry.description })\n        setShowUpdateEntry(!showUpdateEntry);\n      }\n    \n      const showUpdate = (entry) => {\n        setEntry(entry)\n        setShowUpdateEntry(!showUpdateEntry);\n    \n    \n      }\n\n\n\n\n    return <div className=\"flex flex-col w-screen items-center justify-center\">\n        <Navbar username={user} />\n        <Control\n            onAddEntry={() => {\n                setShowAddEntry(!showAddEntry);\n                setShowAddProject(false);\n            }}\n            onAddProject={() => {\n                setShowAddProject(!showAddProject);\n                setShowAddEntry(false);\n            }}\n            onUpdateEntry={() => {\n                setShowUpdateEntry(!showAddProject);\n                setShowUpdateEntry(false);\n            }}\n            onChangeDate={(e) => setDate(e.target.value)}\n            timeSpent={timeSpent}\n\n        />\n          {showAddEntry && (\n            <AddEntry\n                onAddEntry={addEntry}\n                projectCodes={projectCodes}\n            />\n        )}\n        {showAddProject && <AddProject onAddProject={addProject} />}\n        {showUpdateEntry && (\n            <UpdateEntry onUpdateEntry={updateEntry} entry={entry} />\n        )}   \n        <Entries\n            entries={dailyEntries}\n            onUpdate={showUpdate}\n            onDelete={deleteEntry}\n        />\n    </div>;\n};\n\nexport default Home;\n\n\n"]},"metadata":{},"sourceType":"module"}